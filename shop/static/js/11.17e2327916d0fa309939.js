webpackJsonp([11],{"+BEj":function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l("Xxa5"),i=l.n(a),r=l("exGp"),n=l.n(r),s={mixins:[l("6N2n").a],data:function(){return{disabled:!1,dialogFormVisible:!1,detailsImageUrl:"",details:!1,tableData:{table:[],total:null},title:"新增物料",material:{colors:["绿色","黄色","白色"],configruations:["16G","32G","64G","128G"],versions:["aa","bb","cc"],number:123456789,scm:null,level1:"手机",level2:"苹果",level3:"苹果手机 iPhone 11 Pro",color:"",configruation:"",version:"",source:"集采",name:"",describe:"",fileList:[]},rules:{scm:[{required:!0,message:"SCM物料 ID 不能为空",trigger:"blur"}],color:[{required:!0,message:"请选择物料颜色",trigger:"change"}],configruation:[{required:!0,message:"请选择物料配置",trigger:"change"}],version:[{required:!0,message:"请选择物料配置",trigger:"change"}],fileList:[{type:"array",required:!0,message:"至少上传一张图片",trigger:"blur"}]}}},computed:{materialName:function(){var e=this.material;return{level3:e.level3,color:e.color,configruation:e.configruation,version:e.version}}},methods:{getManagement:function(){var e=this;return n()(i.a.mark(function t(){var l,a,r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$get("/management");case 2:l=t.sent,a=l.res,r=l.total,e.tableData.table=a,e.tableData.total=r;case 7:case"end":return t.stop()}},t,e)}))()},currentChange:function(e){var t=this;return n()(i.a.mark(function l(){var a,r,n;return i.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,t.$get("/management?page="+e);case 2:a=l.sent,r=a.res,n=a.total,t.tableData.table=r,t.tableData.total=n;case 7:case"end":return l.stop()}},l,t)}))()},handleClick:function(e){console.log(e),this.title="详情",this.disabled=!0,this.dialogFormVisible=!0},modify:function(e){this.title="物料修改",this.dialogFormVisible=!0},newIncrease:function(){this.title="新增物料",this.dialogFormVisible=!0},handlePictureCardPreview:function(e){this.detailsImageUrl=e.url,this.details=!0},handleRemove:function(e){var t=this.material.fileList,l=t.findIndex(function(t){return t.uid===e.uid});t.splice(l,1)},cancel:function(){var e=this;this.$confirm("确定取消?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.dialogFormVisible=!1,e.$refs.material.resetFields(),e.$message({type:"success",message:"已取消"})})},onSubmit:function(){var e=this;this.$refs.material.validate(function(t){if(!t)return!1;e.dialogFormVisible=!1,e.$refs.material.resetFields(),alert("此处提交数据!")}),console.log(this.material)}},watch:{materialName:{handler:function(e,t){var l=e.level3+" "+e.color+" "+e.configruation+" "+e.version;this.$set(this.material,"name",l),this.$set(this.material,"describe",l)},deep:!0,immediate:!0}},created:function(){this.getManagement()}},o={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("el-card",{staticClass:"materiais-group"},[l("el-row",{staticClass:"mb20"},[l("el-col",{attrs:{span:7}},[l("span",[e._v("一级分类：")]),e._v(" "),l("el-select",{attrs:{placeholder:"请选择分类"},model:{value:e.material.level1,callback:function(t){e.$set(e.material,"level1",t)},expression:"material.level1"}},[l("el-option",{style:{"min-width":e.minWidth+"px"},attrs:{label:"手机",value:"手机"}}),e._v(" "),l("el-option",{attrs:{label:"配件",value:"配件"}})],1)],1),e._v(" "),l("el-col",{attrs:{span:7}},[l("span",[e._v("二级分类：")]),e._v(" "),l("el-select",{attrs:{placeholder:"请选择分类"},model:{value:e.material.level2,callback:function(t){e.$set(e.material,"level2",t)},expression:"material.level2"}},[l("el-option",{style:{"min-width":e.minWidth+"px"},attrs:{label:"手机",value:"手机"}}),e._v(" "),l("el-option",{attrs:{label:"配件",value:"配件"}})],1)],1),e._v(" "),l("el-col",{attrs:{span:7}},[l("span",[e._v("物料组：")]),e._v(" "),l("el-select",{attrs:{placeholder:"请选择分类",clearable:""},model:{value:e.material.level3,callback:function(t){e.$set(e.material,"level3",t)},expression:"material.level3"}},[l("el-option",{style:{"min-width":e.minWidth+"px"},attrs:{label:"苹果手机 iPhone 11 Pro",value:"苹果手机 iPhone 11 Pro"}}),e._v(" "),l("el-option",{attrs:{label:"配件",value:"配件"}})],1)],1),e._v(" "),l("el-col",{attrs:{span:3}},[l("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:e.newIncrease}},[e._v("新增物料")])],1)],1),e._v(" "),l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:!e.tableData.table.length,expression:"!tableData.table.length ? true : false"}],staticClass:"fg1",attrs:{data:e.tableData.table,border:"",stripe:""}},[l("el-table-column",{attrs:{type:"index"}}),e._v(" "),l("el-table-column",{attrs:{prop:"scm",label:"SCM物料 ID",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{prop:"group",label:"物料组名称",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{prop:"describe",label:"物料名称",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{prop:"source",label:"物料来源",width:"100px",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{prop:"number",label:"物料 ID",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{align:"center",label:"操作",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-tooltip",{attrs:{content:"修改",placement:"top",enterable:!1}},[l("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(l){return e.modify(t.row)}}})],1),e._v(" "),l("el-tooltip",{attrs:{content:"查看详情",placement:"top",enterable:!1}},[l("el-button",{attrs:{type:"warning",size:"mini",icon:"el-icon-view"},on:{click:function(l){return e.handleClick(t.row)}}})],1)]}}])})],1),e._v(" "),l("div",{staticClass:"paging mt10"},[l("el-pagination",{attrs:{background:"",layout:"prev, pager, next, jumper",total:e.tableData.total},on:{"current-change":e.currentChange}})],1),e._v(" "),l("el-dialog",{attrs:{title:e.title,visible:e.dialogFormVisible,"show-close":e.disabled,"close-on-click-modal":e.disabled,"close-on-press-escape":e.disabled},on:{"update:visible":function(t){e.dialogFormVisible=t},closed:function(t){e.disabled=!1}}},[l("el-form",{ref:"material",attrs:{model:e.material,rules:e.rules,disabled:e.disabled},nativeOn:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[l("el-row",{staticClass:"pl35"},[l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"一级分类："}},[e._v(e._s(e.material.level1))])],1),e._v(" "),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"二级分类："}},[e._v(e._s(e.material.level2))])],1),e._v(" "),l("el-col",{attrs:{span:12}},[l("el-form-item",{attrs:{label:"二级分类："}},[e._v(e._s(e.material.level3))])],1)],1),e._v(" "),l("el-form-item",{attrs:{label:"物料组 ID","label-width":"100px"}},[l("el-input",{attrs:{value:e.material.number,disabled:!0}})],1),e._v(" "),l("el-form-item",{attrs:{label:"SCM物料 ID","label-width":"100px",prop:"scm"}},[l("el-input",{model:{value:e.material.scm,callback:function(t){e.$set(e.material,"scm",t)},expression:"material.scm"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"颜色","label-width":"100px",prop:"color"}},[l("el-select",{attrs:{placeholder:"请选择物料颜色"},model:{value:e.material.color,callback:function(t){e.$set(e.material,"color",t)},expression:"material.color"}},e._l(e.material.colors,function(e){return l("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1),e._v(" "),l("el-form-item",{attrs:{label:"配置","label-width":"100px",prop:"configruation"}},[l("el-select",{attrs:{placeholder:"请选择物料配置"},model:{value:e.material.configruation,callback:function(t){e.$set(e.material,"configruation",t)},expression:"material.configruation"}},e._l(e.material.configruations,function(e){return l("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1),e._v(" "),l("el-form-item",{attrs:{label:"版本","label-width":"100px",prop:"version"}},[l("el-select",{attrs:{placeholder:"请选择物料版本"},model:{value:e.material.version,callback:function(t){e.$set(e.material,"version",t)},expression:"material.version"}},e._l(e.material.versions,function(e){return l("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1),e._v(" "),l("el-form-item",{attrs:{label:"物料来源","label-width":"100px"}},[l("el-select",{attrs:{placeholder:"请选择物料来源"},model:{value:e.material.source,callback:function(t){e.$set(e.material,"source",t)},expression:"material.source"}},[l("el-option",{attrs:{label:"集采",value:0}}),e._v(" "),l("el-option",{attrs:{label:"自采",value:1}})],1)],1),e._v(" "),l("el-form-item",{attrs:{label:"物料名称","label-width":"100px"}},[l("el-input",{attrs:{value:e.material.name,disabled:!0}})],1),e._v(" "),l("el-form-item",{attrs:{label:"物料描述","label-width":"100px"}},[l("el-input",{model:{value:e.material.describe,callback:function(t){e.$set(e.material,"describe",t)},expression:"material.describe"}})],1),e._v(" "),l("el-alert",{staticClass:"mb15 ",attrs:{title:"图片上传说明",type:"info",description:"上传的第一张图片为主图，最多上传五张图片；建议分辨率：800 * 800；图片大小：不超过 2M","show-icon":"",closable:!1}}),e._v(" "),l("el-form-item",{attrs:{label:"物料组轮播图","label-width":"100px",prop:"fileList"}},[l("el-upload",{attrs:{action:"https://jsonplaceholder.typicode.com/posts/","list-type":"picture-card",limit:5,"file-list":e.material.fileList,"on-preview":e.handlePictureCardPreview,"on-exceed":function(t){return e.$message.warning("最多上传五张图片")},"on-remove":e.handleRemove,"on-change":function(t){var l=t.name,a=t.url;return e.material.fileList.push({name:l,url:a})}}},[l("i",{staticClass:"el-icon-plus"})]),e._v(" "),l("el-dialog",{attrs:{title:"图片详情",visible:e.details,"append-to-body":!0},on:{"update:visible":function(t){e.details=t}}},[l("img",{attrs:{width:"100%",src:e.detailsImageUrl,alt:""}})])],1),e._v(" "),l("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.disabled,expression:"!disabled"}],staticStyle:{"text-align":"right"}},[l("el-button",{on:{click:e.cancel}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary","native-type":"submit"}},[e._v("确 定")])],1)],1)],1)],1)},staticRenderFns:[]};var c=l("VU/8")(s,o,!1,function(e){l("pPs6")},"data-v-3e3308d2",null);t.default=c.exports},pPs6:function(e,t){}});
//# sourceMappingURL=11.17e2327916d0fa309939.js.map