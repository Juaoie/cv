webpackJsonp([19],{Rq4B:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("Xxa5"),o=n.n(a),r=n("exGp"),s=n.n(r),i=n("7+uW");i.default.filter("transformType",function(t){return"SOCIAL"===t?"社会":"自有"}),i.default.filter("transformStatus",function(t){return"OPEN"===t?"开店":"CLOSE"===t?"关店":"歇业"});var c={data:function(){return{current_page:2,page_size:2,total:0,input:"",tableData:[]}},methods:{search:function(){var t=this;return s()(o.a.mark(function e(){var n,a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$get("/shop/shopData/getShopAll",{branchCompanyDictId:1,pageSize:t.page_size,pageNum:t.current_page,shopName:t.input});case 2:n=e.sent,t.total=n.total,a=n.shopResponseList,t.tableData=a;case 6:case"end":return e.stop()}},e,t)}))()},confirmClick:function(t,e,n){var a=this;this.$confirm("您确定执行"+("OPEN"===n?"开店":"CLOSED"===n?"关店":"歇业")+"操作吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$put("shop/shopData/updateShopState",{shopId:e.shopId,shopState:n},{"Content-Type":"application/json"}),a.$message({type:"success",message:"操作成功!"})}).then(function(){a.$router.push("/home/shop/shopList")}).catch(function(){a.$message({type:"info",message:"已取消该操作"})})},newShopClick:function(){this.$router.push("/page/shop/newShop")},operateClick:function(t,e,n){this.$router.push({name:n,query:{shopId:e.shopId}}),console.log(t,e)},handleSizeChange:function(t){var e=this;return s()(o.a.mark(function n(){var a,r;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return console.log(t),e.page_size=t,n.next=4,e.$get("/shop/shopData/getShopAll",{pageSize:t,pageNum:e.current_page,branchCompanyDictId:1,shopName:e.input});case 4:a=n.sent,r=a.shopResponseList,e.tableData=r;case 7:case"end":return n.stop()}},n,e)}))()},handleCurrentChange:function(t){var e=this;return s()(o.a.mark(function n(){var a,r;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return console.log(t+"当前多少页"),e.current_page=t,n.next=4,e.$get("/shop/shopData/getShopAll",{pageSize:e.page_size,pageNum:t,branchCompanyDictId:1,shopName:e.input});case 4:a=n.sent,console.log(a),r=a.shopResponseList,e.tableData=r;case 8:case"end":return n.stop()}},n,e)}))()},getShopListData:function(){var t=this;return s()(o.a.mark(function e(){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$get("../../../../static/shopList.json",{branchCompanyDictId:1});case 2:n=e.sent,console.log(n),t.tableData=n,t.total=t.tableData.length;case 6:case"end":return e.stop()}},e,t)}))()}},mounted:function(){var t=this;return s()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.getShopListData();case 1:case"end":return e.stop()}},e,t)}))()}},l={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-card",[n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{span:5}},[n("el-input",{attrs:{placeholder:"请输入店铺名称",autofocus:"true",clearable:""},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}})],1),t._v(" "),n("el-col",{attrs:{span:2}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.search}},[t._v("搜索")])],1),t._v(" "),n("el-col",{attrs:{span:5,offset:12}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:t.newShopClick}},[t._v("新建店铺")])],1)],1),t._v(" "),n("el-row",{staticClass:"mtb10"},[n("el-table",{staticClass:"w24",attrs:{data:t.tableData,border:"",stripe:""}},[n("el-table-column",{attrs:{prop:"branchCompanyName",label:"分公司",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"shopName",label:"店铺名称",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"shopType",label:"店铺类型",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t._f("transformType")(e.row.shopType))+"\n        ")]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"userName",label:"店长",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"shopStatus",label:"店铺状态",align:"center",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t._f("transformStatus")(e.row.shopStatus))+"\n          "),n("el-tooltip",{attrs:{content:"开店",placement:"top"}},[n("el-button",{staticClass:"iconfont icon-kaidian",attrs:{type:"success",disabled:"OPEN"===e.row.shopStatus,size:"mini"},on:{click:function(n){return t.confirmClick(e.$index,e.row,"OPEN")}}})],1),t._v(" "),n("el-tooltip",{attrs:{content:"歇业",placement:"top"}},[n("el-button",{staticClass:"iconfont icon-xieyezhong",attrs:{type:"warning",disabled:"LAJI"===e.row.shopStatus,size:"mini"},on:{click:function(n){return t.confirmClick(e.$index,e.row,"REST")}}})],1),t._v(" "),n("el-tooltip",{attrs:{content:"关店",placement:"top"}},[n("el-button",{staticClass:"iconfont icon-guandian",attrs:{type:"danger",disabled:"CLOSE"===e.row.shopStatus,size:"mini"},on:{click:function(n){return t.confirmClick(e.$index,e.row,"CLOSED")}}})],1)]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"操作",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tooltip",{attrs:{content:"编辑店铺",placement:"top"}},[n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(n){return t.operateClick(e.$index,e.row,"editShop")}}})],1),t._v(" "),n("el-tooltip",{attrs:{content:"更改店长",placement:"top"}},[n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit-outline"},on:{click:function(n){return t.operateClick(e.$index,e.row,"changeManager")}}})],1)]}}])})],1)],1),t._v(" "),n("el-row",{staticClass:"df jcfe"},[n("el-pagination",{attrs:{current_page:t.current_page,"page-sizes":[2,4,6],page_size:t.page_size,layout:"total, sizes, prev, pager, next, jumper",total:t.total,background:""},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[]},p=n("VU/8")(c,l,!1,null,null,null);e.default=p.exports}});
//# sourceMappingURL=19.13cac14f4e8366b9c1f3.js.map