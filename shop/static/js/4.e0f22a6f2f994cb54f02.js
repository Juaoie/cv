webpackJsonp([4],{"19bi":function(e,t){},"6KW7":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("Xxa5"),i=a.n(l),r=a("exGp"),s=a.n(r),o={mixins:[a("6N2n").a],data:function(){var e=function(e,t,a){t.some(function(e){return""===e})?a(new Error("参数不能为空")):a()};return{tableData:{total:null,table:[]},dialogFormVisible:!1,title:"新增物料组",details:!1,detailsImageUrl:"",disabled:!1,scmDsiabled:!1,materialGroup:{number:0x39c0dc01150a4,level1:"手机",level2:"配件",name:"苹果手机 iPhone 11 Pro ",describe:"Apple iPhone 11 Pro ",colors:["绿色","翡翠绿"],configurations:["64G"],versions:["aa"],fileList:[{name:"aa.jpg",url:a("zQrT")}],parameter:[{item:"CPU",value:""}],listing:""},rules:{number:[{required:!0,message:"请填写物料组编号",trigger:"blur"}],name:[{required:!0,message:"请填写物料组名称",trigger:"blur"}],describe:[{required:!0,message:"请填写物料组描述",trigger:"blur"}],colors:[{required:!0,validator:e,trigger:"blur"}],configurations:[{required:!0,validator:e,trigger:"blur"}],versions:[{required:!0,validator:e,trigger:"blur"}],fileList:[{type:"array",required:!0,message:"至少上传一张图片",trigger:"blur"}]}}},methods:{newIncrease:function(){this.title="新增物料组",this.dialogFormVisible=!0},handlePictureCardPreview:function(e){this.detailsImageUrl=e.url,this.details=!0},handleRemove:function(e){var t=this.materialGroup.fileList,a=t.findIndex(function(t){return t.uid===e.uid});t.splice(a,1)},_getMaterial:function(){var e=this;return s()(i.a.mark(function t(){var a,l,r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$get("/getMaterial");case 2:a=t.sent,l=a.res,r=a.total,e.tableData.total=r,e.tableData.table=l,console.log(l);case 8:case"end":return t.stop()}},t,e)}))()},classifyChange:function(e){console.log(e)},currentChange:function(e){var t=this;return s()(i.a.mark(function a(){var l,r;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.$get("/getMaterial?page="+e);case 2:l=a.sent,r=l.res,t.tableData.table=r;case 5:case"end":return a.stop()}},a,t)}))()},handleClick:function(e){console.log(e),this.title="详情",this.disabled=!0,this.dialogFormVisible=!0},modify:function(e){this.title="物料组修改",this.dialogFormVisible=!0,this.scmDsiabled=!0},cancel:function(){var e=this;this.$confirm("确定取消?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.dialogFormVisible=!1,e.scmDsiabled=!1,e.$refs.materialGroup.resetFields(),e.$message({type:"success",message:"已取消"})})},onSubmit:function(){var e=this;this.$refs.materialGroup.validate(function(t){if(!t)return!1;e.dialogFormVisible=!1,e.scmDsiabled=!1,e.$refs.materialGroup.resetFields(),alert("此处提交数据!")})}},created:function(){this._getMaterial()}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{staticClass:"material-management"},[a("el-row",{staticClass:"mb20 pl20"},[a("el-col",{attrs:{span:7}},[a("span",[e._v("一级分类：")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择一级分类"},on:{change:e.classifyChange},model:{value:e.materialGroup.level1,callback:function(t){e.$set(e.materialGroup,"level1",t)},expression:"materialGroup.level1"}},[a("el-option",{style:{"min-width":e.minWidth+"px"},attrs:{label:"手机",value:"手机"}}),e._v(" "),a("el-option",{attrs:{label:"配件",value:"配件"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("span",[e._v("二级分类：")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择二级分类"},model:{value:e.materialGroup.level2,callback:function(t){e.$set(e.materialGroup,"level2",t)},expression:"materialGroup.level2"}},[a("el-option",{style:{"min-width":e.minWidth+"px"},attrs:{label:"手机",value:"手机"}}),e._v(" "),a("el-option",{attrs:{label:"配件",value:"配件"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:e.newIncrease}},[e._v("新增物料组")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:!e.tableData.table.length,expression:"!tableData.table.length ? true : false"}],staticClass:"fg1",attrs:{data:e.tableData.table,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"number",label:"物料组 ID"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"name",label:"物料组名称"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"scmNumber",label:"SCM物料组 ID"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{content:"修改",placement:"top",enterable:!1}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(a){return e.modify(t.row)}}})],1),e._v(" "),a("el-tooltip",{attrs:{content:"查看详情",placement:"top",enterable:!1}},[a("el-button",{attrs:{type:"warning",size:"mini",icon:"el-icon-view"},on:{click:function(a){return e.handleClick(t.row)}}})],1)]}}])})],1),e._v(" "),a("div",{staticClass:"paging mt10"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next, jumper",total:e.tableData.total},on:{"current-change":e.currentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.dialogFormVisible,"show-close":e.disabled,"close-on-click-modal":e.disabled,"close-on-press-escape":e.disabled},on:{"update:visible":function(t){e.dialogFormVisible=t},closed:function(t){e.disabled=!1}}},[a("el-form",{ref:"materialGroup",attrs:{model:e.materialGroup,rules:e.rules,disabled:e.disabled},nativeOn:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[a("el-row",{staticClass:"pl40"},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"一级分类："}},[e._v(e._s(e.materialGroup.level1))])],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"二级分类："}},[e._v(e._s(e.materialGroup.level2))])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"SCM物料组 ID",prop:"number","label-width":"130px"}},[a("el-input",{attrs:{disabled:e.scmDsiabled},model:{value:e.materialGroup.number,callback:function(t){e.$set(e.materialGroup,"number",t)},expression:"materialGroup.number"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"物料组名称","label-width":"130px",prop:"name"}},[a("el-input",{model:{value:e.materialGroup.name,callback:function(t){e.$set(e.materialGroup,"name",t)},expression:"materialGroup.name"}})],1),e._v(" "),a("el-row",{attrs:{gutter:15}},[a("el-col",{attrs:{span:e.disabled?24:20}},[a("el-form-item",{attrs:{label:"物料组描述","label-width":"130px",prop:"describe"}},[a("el-input",{model:{value:e.materialGroup.describe,callback:function(t){e.$set(e.materialGroup,"describe",t)},expression:"materialGroup.describe"}})],1)],1),e._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:!e.disabled,expression:"!disabled"}],attrs:{span:4}},[a("p",{staticClass:"mt15 copy",on:{click:function(t){e.materialGroup.describe=e.materialGroup.name}}},[e._v("从名称复制")])])],1),e._v(" "),a("el-form-item",{attrs:{label:"颜色","label-width":"130px",prop:"colors"}},[a("div",{staticClass:"df aic item"},[e._l(e.materialGroup.colors,function(t,l){return a("el-input",{key:l,staticClass:"colorInput",model:{value:e.materialGroup.colors[l],callback:function(t){e.$set(e.materialGroup.colors,l,t)},expression:"materialGroup.colors[index]"}},[a("i",{directives:[{name:"show",rawName:"v-show",value:!e.disabled,expression:"!disabled"}],staticClass:"el-input__icon el-icon-circle-close",attrs:{slot:"suffix"},on:{click:function(t){e.materialGroup.colors.length>1&&e.materialGroup.colors.splice(l,1)}},slot:"suffix"})])}),e._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:!e.disabled,expression:"!disabled"}],staticClass:"el-icon-circle-plus-outline ml15",on:{click:function(t){return e.materialGroup.colors.push("")}}})],2)]),e._v(" "),a("el-form-item",{attrs:{label:"配置(储存)","label-width":"130px",prop:"configurations"}},[a("div",{staticClass:"df aic item"},[e._l(e.materialGroup.configurations,function(t,l){return a("el-input",{key:l,staticClass:"colorInput",model:{value:e.materialGroup.configurations[l],callback:function(t){e.$set(e.materialGroup.configurations,l,t)},expression:"materialGroup.configurations[index]"}},[a("i",{directives:[{name:"show",rawName:"v-show",value:!e.disabled,expression:"!disabled"}],staticClass:"el-input__icon el-icon-circle-close",attrs:{slot:"suffix"},on:{click:function(t){e.materialGroup.configurations.length>1&&e.materialGroup.configurations.splice(l,1)}},slot:"suffix"})])}),e._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:!e.disabled,expression:"!disabled"}],staticClass:"el-icon-circle-plus-outline ml15",on:{click:function(t){return e.materialGroup.configurations.push("")}}})],2)]),e._v(" "),a("el-form-item",{attrs:{label:"版本","label-width":"130px",prop:"versions"}},[a("div",{staticClass:"df aic item"},[e._l(e.materialGroup.versions,function(t,l){return a("el-input",{key:l,staticClass:"colorInput",model:{value:e.materialGroup.versions[l],callback:function(t){e.$set(e.materialGroup.versions,l,t)},expression:"materialGroup.versions[index]"}},[a("i",{directives:[{name:"show",rawName:"v-show",value:!e.disabled,expression:"!disabled"}],staticClass:"el-input__icon el-icon-circle-close",attrs:{slot:"suffix"},on:{click:function(t){e.materialGroup.versions.length>1&&e.materialGroup.versions.splice(l,1)}},slot:"suffix"})])}),e._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:!e.disabled,expression:"!disabled"}],staticClass:"el-icon-circle-plus-outline ml15",on:{click:function(t){return e.materialGroup.versions.push("")}}})],2)]),e._v(" "),a("el-form-item",{attrs:{label:"包装清单","label-width":"130px"}},[a("el-input",{model:{value:e.materialGroup.listing,callback:function(t){e.$set(e.materialGroup,"listing",t)},expression:"materialGroup.listing"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"490px"},attrs:{label:"物料参数","label-width":"130px"}},[a("el-table",{attrs:{data:e.materialGroup.parameter,border:"",size:"mini"}},[a("el-table-column",{attrs:{prop:"item",label:"参数项",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{label:"参数值",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini"},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}})]}}])})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"详情页(电商图)","label-width":"130px",prop:"fileList"}},[a("el-upload",{attrs:{action:"https://jsonplaceholder.typicode.com/posts/","list-type":"picture-card","on-preview":e.handlePictureCardPreview,"file-list":e.materialGroup.fileList,"on-remove":e.handleRemove,"on-change":function(t){var a=t.name,l=t.url;return e.materialGroup.fileList.push({name:a,url:l})}}},[a("i",{staticClass:"el-icon-plus"})]),e._v(" "),a("el-dialog",{attrs:{title:"图片详情",visible:e.details,"append-to-body":!0},on:{"update:visible":function(t){e.details=t}}},[a("img",{attrs:{width:"100%",src:e.detailsImageUrl,alt:""}})])],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.disabled,expression:"!disabled"}],staticStyle:{"text-align":"right"}},[a("el-button",{on:{click:e.cancel}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary","native-type":"submit"}},[e._v("确 定")])],1)],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(o,n,!1,function(e){a("19bi")},"data-v-3b307ea0",null);t.default=c.exports},zQrT:function(e,t,a){e.exports=a.p+"static/img/avatar.6e94491.png"}});
//# sourceMappingURL=4.e0f22a6f2f994cb54f02.js.map