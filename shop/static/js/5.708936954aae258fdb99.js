webpackJsonp([5],{"6VWN":function(e,t){},hEoi:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-card",{staticClass:"heightfull df ffcn"},[s("el-row",{attrs:{gutter:10}},[s("el-col",{attrs:{span:5}},[s("el-input",{attrs:{placeholder:"请输入用户名称/手机号"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}})],1),e._v(" "),s("el-col",{attrs:{span:2}},[s("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("搜索")])],1),e._v(" "),s("el-col",{attrs:{span:5,offset:12}},[s("el-button",{staticClass:"w24",attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:e.new_user}},[e._v("新建用户")])],1)],1),e._v(" "),s("el-row",{staticClass:"mtb10 fg1"},[s("el-table",{ref:"filterTable",staticClass:"w24",attrs:{data:e.tableData,border:"","max-height":"490","default-sort":{prop:"userName",order:"descending"},"row-class-name":e.tableRowClassName},on:{"filter-change":e.binFilters}},[s("el-table-column",{attrs:{prop:"userName",label:"用户名称",sortable:"","header-align":"center",align:"center",width:"120"}}),e._v(" "),s("el-table-column",{attrs:{prop:"userId",label:"手机号码","header-align":"center",align:"center"}}),e._v(" "),s("el-table-column",{attrs:{prop:"role",label:"角色",filters:e.filtersRole,"column-key":"role","show-overflow-tooltip":!0,"header-align":"center"}}),e._v(" "),s("el-table-column",{attrs:{prop:"status_text",label:"用户状态",filters:[{text:"可用",value:"1"},{text:"停用",value:"2"}],"column-key":"status","filter-multiple":!1,"header-align":"center",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(1==t.row.status?"可用":"停用")+"\n          "),s("el-tooltip",{staticClass:"tooltip_item",attrs:{effect:"dark",content:1==t.row.status?"停用用户":"启用用户",placement:"top"}},[s("i",{class:1==t.row.status?"el-icon-lock red":"el-icon-unlock blue",on:{click:function(s){return e.handleDelete(t.row,t.$index)}}})])]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"createTime",label:"创建时间",sortable:"","header-align":"center",align:"center"}}),e._v(" "),s("el-table-column",{attrs:{prop:"updateTime",label:"最后登录时间","header-align":"center",align:"center"}}),e._v(" "),s("el-table-column",{attrs:{prop:"tenantName",label:"分公司",filters:e.filtersOffice,"column-key":"office","header-align":"center",align:"center"}}),e._v(" "),s("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-tooltip",{staticClass:"tooltip_item",attrs:{effect:"dark",content:"修改用户信息",placement:"top"}},[s("i",{staticClass:"el-icon-edit blue",on:{click:function(s){return e.change_info_user(t.row)}}})])]}}])})],1)],1),e._v(" "),s("el-row",{staticClass:"mt10 df jcfe pb10"},[s("el-pagination",{attrs:{"current-page":e.current_page,"page-sizes":[50,100,200],"page-size":e.page_size,layout:"total, sizes, prev, pager, next, jumper",total:e.total,background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var a=s("VU/8")({data:function(){return{tableData:[],filtersRole:[],filtersOffice:[],filters:{filtersRole:[],filtersOffice:[],filtersStatus:[]},keywords:"",total:0,current_page:1,page_size:50}},created:function(){var e=this;this.getUsersList(),this.$get("roles").then(function(t){t.roles.forEach(function(e){e.text=e.roleName,e.value=e.roleId}),e.filtersRole=t.roles}),this.$get("offices").then(function(t){t.branchCompanys.forEach(function(e){e.text=e.name,e.value=e.id}),e.filtersOffice=t.branchCompanys})},mounted:function(){},methods:{binFilters:function(e){"role"in e&&(this.filters.filtersRole=e.role),"status"in e&&(this.filters.filtersStatus=e.status),"office"in e&&(this.filters.filtersOffice=e.office),this.getUsersList()},new_user:function(){this.$router.push({path:"/page/user/addUser",query:{}})},change_info_user:function(e){this.$router.push({path:"/page/user/editUserInfo",query:{id:e.id}})},search:function(){var e=this;this.current_page=1,this.$get("users/keywords",{param:{keywords:this.keywords,current_page:this.current_page,page_size:this.page_size}}).then(function(t){e.$refs.filterTable.clearFilter(),e.filters.filtersRole=[],e.filters.filtersStatus=[],e.filters.filtersOffice=[],e.tableData=t.data,e.total=t.total})},handleDelete:function(e,t){var s=this;this.$confirm("确定"+("1"==e.status?"停用":"启用")+"用户?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){s.$put("1"==e.status?"users/freezeUser":"users/unFreezeUser",{id:e.id},{"Content-Type":"application/json"}).then(function(e){s.getUsersList()})})},tableRowClassName:function(e){var t=e.row,s=(e.rowIndex,[]);t.userRoles.forEach(function(e){s.push(e.roleName)}),t.role=s.join(" | "),"1"==t.status?t.status_text="可用":"2"==t.status&&(t.status_text="停用")},handleSizeChange:function(e){this.page_size=e,this.getUsersList()},handleCurrentChange:function(e){this.current_page=e,this.getUsersList()},getUsersList:function(){var e=this;this.filters.filtersRole.length||this.filters.filtersOffice.length||this.filters.filtersStatus.length?this.$get("users/filter",{param:{roleId:this.filters.filtersRole.join(","),status:this.filters.filtersStatus[0],tenantId:this.filters.filtersOffice.join(","),current_page:1,page_size:this.page_size}}).then(function(t){e.tableData=t.data,e.total=t.total,e.keywords=""}):this.$get("users",{param:{current_page:this.current_page,page_size:this.page_size}}).then(function(t){e.tableData=t.data,e.total=t.total})}}},r,!1,function(e){s("6VWN")},"data-v-ee808754",null);t.default=a.exports}});
//# sourceMappingURL=5.708936954aae258fdb99.js.map