webpackJsonp([8],{EgDz:function(e,t){},TWBs:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("mvHQ"),n=r.n(o),s={name:"login",data:function(){return{code_text:"获取验证码",form:{uid:"",password:"",code:""},rules:{uid:[{required:!0,message:"请输入手机号",trigger:"blur"},{min:11,max:11,message:"请输入正确的手机号码",trigger:"blur"}],password:[{required:!0,message:"请输入身份证后六位",trigger:"blur"},{min:6,max:6,message:"长度为 6 位字符",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"},{min:6,max:6,message:"请输入验证码",trigger:"blur"}]}}},methods:{login:function(){var e=this,t=this.$loading({lock:!0,text:"拼命加载中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.8)"});this.$get("user/hingeUserLogin",{phone:this.form.uid,identityCard:this.form.password,verificationCode:this.form.code,loginType:"Code"}).then(function(r){if(!r.jwtToken)return e.$notify({title:"提示",message:r,type:"warning"}),void t.close();localStorage.setItem("userInfo",n()(r)),t.close(),e.$router.replace("/home")}).catch(function(e){t.close()})},handleLogin:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(!t)return t;e.login()})},get_code:function(){var e=this;this.$get("user/loginCode",{phone:this.form.uid}).then(function(t){"string"==typeof e.code_text&&(e.code_text=30);var r=setInterval(function(){"number"==typeof e.code_text&&0==e.code_text?(e.code_text="获取验证码",clearInterval(r)):"number"==typeof e.code_text&&0!=e.code_text&&(e.code_text=e.code_text-1)},1e3)})}}},a={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login df aic jcc"},[r("el-form",{ref:"ruleForm",staticClass:"plr40 br10 login-form",attrs:{rules:e.rules,model:e.form,"hide-required-asterisk":""}},[r("h3",[e._v("后台系统")]),e._v(" "),r("el-row",[r("el-col",{staticClass:"df jcfe aic h36",attrs:{span:5}},[r("span",[e._v("手机号：")])]),e._v(" "),r("el-col",{attrs:{span:19}},[r("el-form-item",{attrs:{prop:"uid"}},[r("el-input",{attrs:{maxlength:"11",autofocus:"",clearable:"",type:"text","prefix-icon":"el-icon-user-solid",placeholder:"请输入手机号"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.form.uid,callback:function(t){e.$set(e.form,"uid",t)},expression:"form.uid"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{staticClass:"df jcfe aic h36",attrs:{span:5}},[r("span",[e._v("密码：")])]),e._v(" "),r("el-col",{attrs:{span:19}},[r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{maxlength:"6","prefix-icon":"el-icon-lock",placeholder:"请输入身份证后六位","show-password":""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{staticClass:"df jcfe aic h36",attrs:{span:5}},[r("span",[e._v("验证码：")])]),e._v(" "),r("el-col",{attrs:{span:11}},[r("el-form-item",{attrs:{prop:"code"}},[r("el-input",{attrs:{maxlength:"6",placeholder:"请输入验证码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1)],1),e._v(" "),r("el-col",{staticClass:"df jcfe",attrs:{span:8}},[r("el-button",{staticClass:"w20",attrs:{type:"primary",disabled:11!=e.form.uid.length||"number"==typeof e.code_text},on:{click:e.get_code},model:{value:e.code_text,callback:function(t){e.code_text=t},expression:"code_text"}},[e._v(e._s(e.code_text))])],1)],1),e._v(" "),r("el-row",{staticClass:"df jcc"},[r("el-col",{attrs:{span:20}},[r("el-form-item",[r("el-button",{staticClass:"df aic jcc login-button",attrs:{type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleLogin(t)}}},[r("span",[e._v("登录")])])],1)],1)],1)],1)],1)},staticRenderFns:[]};var i=r("VU/8")(s,a,!1,function(e){r("EgDz")},"data-v-67085626",null);t.default=i.exports}});
//# sourceMappingURL=8.4f0e9fc846aff4a2abd9.js.map