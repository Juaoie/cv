webpackJsonp([9],{AzPU:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var l={data:function(){return{filtersRole:{headquarters:[],branch:[],other:[]},ruleForm:{name:"",phone:"",role_id:[],tenantName:"",createTime:"",updateTime:""},rules:{name:[{required:!0,message:"请输入用户名称",trigger:"blur"},{min:3,max:16,message:"长度在 3 到 16 个字符",trigger:"blur"}]}}},mounted:function(){var e=this,r=[3,5,6,7,8,9,10,11,12,13,14],t=this.filtersRole,l=this.ruleForm.role_id;this.$get("users/id",this.$route.query).then(function(a){e.ruleForm.phone=a.user.userId,e.ruleForm.name=a.user.userName,e.ruleForm.tenantName=a.user.tenantName,e.ruleForm.createTime=a.user.createTime,e.ruleForm.updateTime=a.user.updateTime,e.$get("roles").then(function(e){e.roles.forEach(function(e){r.forEach(function(r){r==e.roleId&&(e.disabled=!0)}),a.user.userRoles.forEach(function(r){r.roleId==e.roleId&&(l.push(r.roleId),e.state_disabled=!0,e.roleStatus=r.roleStatus)}),[1,2,3].indexOf(parseInt(e.roleId))>=0?t.headquarters.push(e):[4,5,6,7,8,9,10].indexOf(parseInt(e.roleId))>=0?t.branch.push(e):t.other.push(e)})})})},methods:{goBack:function(){this.$router.back()},modifyUser:function(){var e=this;this.$refs.ruleForm.validate(function(r){if(r){var t=[];for(var l in e.ruleForm.role_id)for(var a in e.filtersRole)for(var s in e.filtersRole[a])e.filtersRole[a][s].roleId==e.ruleForm.role_id[l]&&t.push({roleId:e.ruleForm.role_id[l],userId:e.ruleForm.phone,roleStatus:e.filtersRole[a][s].roleStatus||"1"});e.$put("users/modifyUser",{id:e.$route.query.id,userName:e.ruleForm.name,userRoles:t}).then(function(r){e.$alert("用户信息更新成功","更新用户",{confirmButtonText:"确定",callback:function(r){e.$router.back()}})})}})}}},a={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("el-row",[t("el-page-header",{attrs:{content:"编辑用户信息"},on:{back:e.goBack}})],1),e._v(" "),t("el-row",{staticClass:"df aic jcc"},[t("el-col",{attrs:{span:18}},[t("el-row",{staticClass:"mt10 df form"},[t("el-col",{attrs:{span:22,offset:1}},[t("el-form",{ref:"ruleForm",staticClass:"mt20",attrs:{model:e.ruleForm,rules:e.rules}},[t("el-row",[t("el-col",{attrs:{span:3}},[t("span",{staticClass:"form_name"},[e._v("手机号码")])]),e._v(" "),t("el-col",{attrs:{span:21}},[t("el-form-item",{attrs:{prop:"phone"}},[t("el-input",{attrs:{value:e.ruleForm.phone,disabled:""}})],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:3}},[t("span",{staticClass:"form_name"},[e._v("用户名称")])]),e._v(" "),t("el-col",{attrs:{span:21}},[t("el-form-item",{attrs:{prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入用户名称",maxlength:"16"},model:{value:e.ruleForm.name,callback:function(r){e.$set(e.ruleForm,"name",r)},expression:"ruleForm.name"}})],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:3}},[t("span",{staticClass:"form_name"},[e._v("角色操作")])]),e._v(" "),t("el-col",{attrs:{span:21}},[t("el-form-item",[t("el-row",[t("el-col",{attrs:{span:8}},[t("el-checkbox-group",{staticClass:"df ffcw",attrs:{size:"small"},model:{value:e.ruleForm.role_id,callback:function(r){e.$set(e.ruleForm,"role_id",r)},expression:"ruleForm.role_id"}},e._l(e.filtersRole.headquarters,function(r){return t("el-checkbox",{key:r.roleId,attrs:{label:r.roleId,disabled:r.disabled||r.state_disabled}},[e._v("\n                                                    "+e._s(r.roleName)+"\n                                                    "),!r.disabled&&r.state_disabled?t("el-radio-group",{attrs:{size:"mini"},model:{value:r.roleStatus,callback:function(t){e.$set(r,"roleStatus",t)},expression:"item.roleStatus"}},[t("el-radio",{staticClass:"mr10",attrs:{label:1}},[e._v("启用")]),e._v(" "),t("el-radio",{attrs:{label:2}},[e._v("禁用")])],1):e._e()],1)}),1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-checkbox-group",{staticClass:"df ffcw",attrs:{size:"small"},model:{value:e.ruleForm.role_id,callback:function(r){e.$set(e.ruleForm,"role_id",r)},expression:"ruleForm.role_id"}},e._l(e.filtersRole.branch,function(r){return t("el-checkbox",{key:r.roleId,attrs:{label:r.roleId,disabled:r.disabled||r.state_disabled}},[e._v("\n                                                    "+e._s(r.roleName)+"\n                                                    "),!r.disabled&&r.state_disabled?t("el-radio-group",{attrs:{size:"mini"},model:{value:r.roleStatus,callback:function(t){e.$set(r,"roleStatus",t)},expression:"item.roleStatus"}},[t("el-radio",{staticClass:"mr10",attrs:{label:1}},[e._v("启用")]),e._v(" "),t("el-radio",{attrs:{label:2}},[e._v("禁用")])],1):e._e()],1)}),1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-checkbox-group",{staticClass:"df ffcw",attrs:{size:"small"},model:{value:e.ruleForm.role_id,callback:function(r){e.$set(e.ruleForm,"role_id",r)},expression:"ruleForm.role_id"}},e._l(e.filtersRole.other,function(r){return t("el-checkbox",{key:r.roleId,attrs:{label:r.roleId,disabled:r.disabled||r.state_disabled}},[e._v("\n                                                    "+e._s(r.roleName)+"\n                                                    "),!r.disabled&&r.state_disabled?t("el-radio-group",{attrs:{size:"mini"},model:{value:r.roleStatus,callback:function(t){e.$set(r,"roleStatus",t)},expression:"item.roleStatus"}},[t("el-radio",{staticClass:"mr10",attrs:{label:1}},[e._v("启用")]),e._v(" "),t("el-radio",{attrs:{label:2}},[e._v("禁用")])],1):e._e()],1)}),1)],1)],1)],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:3}},[t("span",{staticClass:"form_name"},[e._v("所属公司")])]),e._v(" "),t("el-col",{attrs:{span:21}},[t("el-input",{attrs:{disabled:""},model:{value:e.ruleForm.tenantName,callback:function(r){e.$set(e.ruleForm,"tenantName",r)},expression:"ruleForm.tenantName"}})],1)],1),e._v(" "),t("el-row",{staticClass:"mtb40"},[t("el-col",{staticClass:"df aic jcc",attrs:{span:19,offset:3}},[t("el-button",{staticClass:"w06",attrs:{type:"primary"},on:{click:e.modifyUser}},[e._v("更新信息")])],1)],1)],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var s=t("VU/8")(l,a,!1,function(e){t("Yn21")},"data-v-5a0da2d0",null);r.default=s.exports},Yn21:function(e,r){}});
//# sourceMappingURL=9.5dbed204f0123b8f9c99.js.map