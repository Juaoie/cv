{"version":3,"sources":["webpack:///src/pages/chat/group.vue","webpack:///./src/pages/chat/group.vue?879d","webpack:///./src/pages/chat/group.vue"],"names":["group","data","msg","userInfo","post_data","ops","rail","background","border","size","bar","keepShow","minSize","scrollButton","enable","scrollPanel","easing","speed","vuescroll","wheelScrollDuration","wheelDirectionReverse","created","this","JSON","parse","localStorage","getItem","$socket","emit","mounted","methods","scrollEvent","console","log","setChatMsg","res","user_id","sockets","connect","getLineNum","getChatMsg","_post_data","_this","push","apply","toConsumableArray_default","sort","i","j","id","length","$nextTick","$refs","scrollIntoView","chat_group","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","span","ref","on","scroll","_l","item","key","class","shape","src","user_head","_v","_s","placeholder","type","model","value","callback","$$v","expression","plain","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"mJAwCAA,GACAC,KADA,WAEA,OACAC,IAAA,GACAC,YACAC,aACAC,KACAC,MACAC,WAAA,UACAC,OAAA,oBACAC,KAAA,OAEAC,KACAH,WAAA,OACAI,UAAA,EACAF,KAAA,MACAG,QAAA,GAEAC,cACAC,QAAA,EACAP,WAAA,WAEAQ,aACAC,OAAA,aACAC,MAAA,KAEAC,WACAC,oBAAA,EACAC,uBAAA,MAKAC,QAjCA,WAkCAC,KAAAnB,SAAAoB,KAAAC,MAAAC,aAAAC,QAAA,aACAJ,KAAAK,QAAAC,KAAA,eAEAC,QArCA,aAsCAC,SACAC,YADA,WAEAC,QAAAC,IAAA,SAEAC,WAJA,SAIAC,GACAb,KAAAK,QAAAC,KAAA,cACA1B,IAAAoB,KAAApB,IACAkC,QAAAd,KAAAnB,SAAA,YAIAkC,SACAC,QADA,SACAH,KAIAI,WALA,SAKAJ,GACAH,QAAAC,IAAA,aAAAE,IAGAK,WATA,SASAL,GAAA,IAAAM,EAAAC,EAAApB,MACAmB,EAAAnB,KAAAlB,WAAAuC,KAAAC,MAAAH,EAAAI,IAAAV,IACAb,KAAAlB,UAAA0C,KAAA,SAAAC,EAAAC,GACA,OAAAD,EAAAE,GAAAD,EAAAC,KAEA,IAAAA,EAAAd,IAAAe,OAAA,GAAAD,GACA3B,KAAA6B,UAAA,WACAF,IAAAP,EAAAtC,UAAAsC,EAAAtC,UAAA8C,OAAA,GAAAD,IACAP,EAAAU,MAAA,GAAAC,eAAA,MAAAJ,EAAA,UCvGeK,GADEC,OAFjB,WAA0B,IAAAC,EAAAlC,KAAamC,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAA,EAAA,UAA8BE,YAAA,WAAqBF,EAAA,UAAeG,OAAOC,KAAA,MAAWJ,EAAA,UAAeE,YAAA,sBAAgCF,EAAA,cAAmBK,IAAA,KAAAF,OAAgBzD,IAAAmD,EAAAnD,KAAc4D,IAAKC,OAAAV,EAAAzB,eAA0B4B,EAAA,OAAYE,YAAA,OAAkBL,EAAAW,GAAAX,EAAA,mBAAAY,GAAuC,OAAAT,EAAA,OAAiBU,IAAAD,EAAAnB,GAAAY,YAAA,gBAAAS,OAAAF,EAAAhC,SAAAoB,EAAArD,SAAAiC,QAAA,eAAA0B,OAAwGb,IAAA,KAAAmB,EAAAnB,OAAqBU,EAAA,aAAkBW,OAAAF,EAAAhC,SAAAoB,EAAArD,SAAAiC,QAAA,WAAA0B,OAA4DS,MAAA,SAAA9D,KAAA,SAAA+D,IAAAJ,EAAAK,aAAuDjB,EAAAkB,GAAA,KAAAf,EAAA,OAAwBE,YAAA,kBAA4BL,EAAAkB,GAAAlB,EAAAmB,GAAAP,EAAAlE,SAAA,KAAiC,SAAAsD,EAAAkB,GAAA,KAAAf,EAAA,UAAoCE,YAAA,aAAuBF,EAAA,UAAAA,EAAA,YAA8BE,YAAA,WAAAC,OAA8Bc,YAAA,SAAAC,KAAA,YAAyCC,OAAQC,MAAAvB,EAAA,IAAAwB,SAAA,SAAAC,GAAyCzB,EAAAtD,IAAA+E,GAAYC,WAAA,UAAmB,GAAA1B,EAAAkB,GAAA,KAAAf,EAAA,UAAAA,EAAA,aAA+CE,YAAA,YAAAC,OAA+Be,KAAA,OAAAM,MAAA,IAAyBlB,IAAKmB,MAAA5B,EAAAtB,cAAwBsB,EAAAkB,GAAA,6BAE5jCW,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACExF,EACAsD,GATF,EAVA,SAAAmC,GACEF,EAAQ,SAaV,KAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"static/js/1.8214951af1c3c4c46e9c.js","sourcesContent":["<template>\r\n  <div>\r\n    <el-row class=\"df jcc\">\r\n      <el-col :span=\"18\">\r\n        <el-row class=\"chatWindw df ffcn\">\r\n          <vue-scroll :ops=\"ops\" ref=\"vs\" @scroll=\"scrollEvent\">\r\n            <div class=\"p20\">\r\n              <div\r\n                v-for=\"item in post_data\"\r\n                :key=\"item.id\"\r\n                class=\"df aifs ptb10\"\r\n                :class=\"[item.user_id==userInfo.user_id?'jcfe':'jcfs']\"\r\n                :id=\"['id'+item.id]\"\r\n              >\r\n                <el-avatar\r\n                  \r\n                  :class=\"[item.user_id==userInfo.user_id?'o2':'o0']\"\r\n                  shape=\"square\"\r\n                  size=\"medium\"\r\n                  :src=\"item.user_head\"\r\n                ></el-avatar>\r\n                <div class=\"text o1 mlr10\">{{item.msg}}</div>\r\n              </div>\r\n            </div>\r\n          </vue-scroll>\r\n        </el-row>\r\n        <el-row class=\"sendText\">\r\n          <el-col>\r\n            <el-input class=\"inputSen\" v-model=\"msg\" placeholder=\"请输入...\" type=\"textarea\"></el-input>\r\n          </el-col>\r\n          <el-col>\r\n            <el-button class=\"buttonSen\" type=\"info\" plain @click=\"setChatMsg\">发送</el-button>\r\n          </el-col>\r\n        </el-row>\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      msg: \"\",\r\n      userInfo: {},\r\n      post_data: [],\r\n      ops: {\r\n        rail: {\r\n          background: \"#f5f5f5\",\r\n          border: \"1px solid #cecece\",\r\n          size: \"7px\"\r\n        },\r\n        bar: {\r\n          background: \"#999\",\r\n          keepShow: true,\r\n          size: \"5px\",\r\n          minSize: 0\r\n        },\r\n        scrollButton: {\r\n          enable: true,\r\n          background: \"#cecece\"\r\n        },\r\n        scrollPanel: {\r\n          easing: \"easeInQuad\",\r\n          speed: 800\r\n        },\r\n        vuescroll: {\r\n          wheelScrollDuration: 0,\r\n          wheelDirectionReverse: false\r\n        }\r\n      }\r\n    };\r\n  },\r\n  created() {\r\n    this.userInfo = JSON.parse(localStorage.getItem(\"userInfo\"));\r\n    this.$socket.emit(\"getChatMsg\");\r\n  },\r\n  mounted() {},\r\n  methods: {\r\n    scrollEvent() {\r\n      console.log(\"滚动结束\");\r\n    },\r\n    setChatMsg(res) {\r\n      this.$socket.emit(\"setChatMsg\", {\r\n        msg: this.msg,\r\n        user_id: this.userInfo[\"user_id\"]\r\n      });\r\n    }\r\n  },\r\n  sockets: {\r\n    connect(res) {\r\n      //this.$socket.emit(\"getChatMsg\");\r\n    },\r\n    //获取在线人数\r\n    getLineNum(res) {\r\n      console.log(\"getLineNum\", res);\r\n    },\r\n    //获取信息\r\n    getChatMsg(res) {\r\n      this.post_data.push(...res);\r\n      this.post_data.sort((i, j) => {\r\n        return i.id - j.id;\r\n      });\r\n      let id = res[res.length - 1].id;\r\n      this.$nextTick(() => {\r\n        if (id === this.post_data[this.post_data.length - 1].id) {\r\n          this.$refs[\"vs\"].scrollIntoView(`#id${id}`, 500);\r\n        }\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n.inputSen{\r\n  \r\n}\r\n.buttonSen{\r\n\r\n}\r\n.sendText {\r\n  border: 1px solid #ebeef5;\r\n}\r\n.text {\r\n  background: #fff;\r\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\r\n  color: #606266;\r\n  border: 1px solid #ebeef5;\r\n  padding: 10px;\r\n  max-width: 75%;\r\n  border-radius: 3px;\r\n}\r\n.chatWindw {\r\n  background: #f5f5f5;\r\n  height: 450px;\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/pages/chat/group.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-row',{staticClass:\"df jcc\"},[_c('el-col',{attrs:{\"span\":18}},[_c('el-row',{staticClass:\"chatWindw df ffcn\"},[_c('vue-scroll',{ref:\"vs\",attrs:{\"ops\":_vm.ops},on:{\"scroll\":_vm.scrollEvent}},[_c('div',{staticClass:\"p20\"},_vm._l((_vm.post_data),function(item){return _c('div',{key:item.id,staticClass:\"df aifs ptb10\",class:[item.user_id==_vm.userInfo.user_id?'jcfe':'jcfs'],attrs:{\"id\":['id'+item.id]}},[_c('el-avatar',{class:[item.user_id==_vm.userInfo.user_id?'o2':'o0'],attrs:{\"shape\":\"square\",\"size\":\"medium\",\"src\":item.user_head}}),_vm._v(\" \"),_c('div',{staticClass:\"text o1 mlr10\"},[_vm._v(_vm._s(item.msg))])],1)}),0)])],1),_vm._v(\" \"),_c('el-row',{staticClass:\"sendText\"},[_c('el-col',[_c('el-input',{staticClass:\"inputSen\",attrs:{\"placeholder\":\"请输入...\",\"type\":\"textarea\"},model:{value:(_vm.msg),callback:function ($$v) {_vm.msg=$$v},expression:\"msg\"}})],1),_vm._v(\" \"),_c('el-col',[_c('el-button',{staticClass:\"buttonSen\",attrs:{\"type\":\"info\",\"plain\":\"\"},on:{\"click\":_vm.setChatMsg}},[_vm._v(\"发送\")])],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-ffa4fc5e\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/chat/group.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-ffa4fc5e\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./group.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./group.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./group.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-ffa4fc5e\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./group.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/chat/group.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}