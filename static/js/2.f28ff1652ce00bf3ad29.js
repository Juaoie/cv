webpackJsonp([2],{TWBs:function(e,r,s){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=s("mvHQ"),t=s.n(o),n=s("Dd8w"),i=s.n(n),a=s("sqb0"),l=s.n(a),u={name:"login",data:function(){return{form:{user_id:"",password:"",checked:!1},rules:{user_id:[{required:!0,message:"请输入账号",trigger:"blur"},{min:5,max:16,message:"长度在 5 到 16 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:16,message:"长度在 6 到 16 个字符",trigger:"blur"}]}}},methods:{login:function(){var e=this,r=this.$loading({lock:!0,text:"拼命加载中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.8)"});this.$post("user/login",{user_id:this.form.user_id,password:this.form.password}).then(function(s){if(!s.user_id)return e.$notify({title:"提示",message:s,type:"warning"}),void r.close();var o=i()({password:e.form.password},s);e.form.checked?l.a.set("userInfo",o,{expires:1}):l.a.remove("userInfo"),sessionStorage.setItem("userInfo",t()(o)),r.close(),e.$router.replace("/page/user/userList")}).catch(function(e){r.close()})},handleLogin:function(){var e=this;console.log(this.$refs),this.$refs.ruleForm.validate(function(r){if(!r)return r;e.login()})}}},c={render:function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("div",{staticClass:"login df aic jcc"},[s("el-form",{ref:"ruleForm",staticClass:"plr40 br10 login-form",attrs:{rules:e.rules,model:e.form,"hide-required-asterisk":""}},[s("h3",[e._v("后台系统")]),e._v(" "),s("el-form-item",{attrs:{prop:"user_id"}},[s("el-input",{attrs:{autofocus:"",clearable:"",type:"text","prefix-icon":"el-icon-user-solid",placeholder:"请输入账号"},nativeOn:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.handleLogin(r)}},model:{value:e.form.user_id,callback:function(r){e.$set(e.form,"user_id",r)},expression:"form.user_id"}})],1),e._v(" "),s("el-form-item",{attrs:{prop:"password"}},[s("el-input",{attrs:{"prefix-icon":"el-icon-lock",placeholder:"请输入密码","show-password":""},nativeOn:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.handleLogin(r)}},model:{value:e.form.password,callback:function(r){e.$set(e.form,"password",r)},expression:"form.password"}})],1),e._v(" "),s("el-form-item",[s("el-checkbox",{model:{value:e.form.checked,callback:function(r){e.$set(e.form,"checked",r)},expression:"form.checked"}},[e._v("记住我")])],1),e._v(" "),s("el-form-item",[s("el-button",{staticClass:"df aic jcc login-button",attrs:{type:"primary"},nativeOn:{click:function(r){return r.preventDefault(),e.handleLogin(r)}}},[s("span",[e._v("登录")])])],1)],1)],1)},staticRenderFns:[]};var d=s("VU/8")(u,c,!1,function(e){s("v1HR")},null,null);r.default=d.exports},v1HR:function(e,r){}});
//# sourceMappingURL=2.f28ff1652ce00bf3ad29.js.map